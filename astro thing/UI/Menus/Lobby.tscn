[gd_scene load_steps=2 format=3 uid="uid://b84pyq1thivsh"]

[sub_resource type="GDScript" id="GDScript_2si1u"]
script/source = "extends Control

const Server_port = 8080
const Server_IP = \"127.0.0.1\"

var player = preload(\"res://player/player.tscn\")

var shipspawn_node

func become_host():
	shipspawn_node = get_tree().get_current_sceen().get_node(\"shipholder\")
	
	var server_peer = ENetMultiplayerPeer.new()
	server_peer.create_server(Server_port)
	
	multiplayer.multiplayer_peer = server_peer
	multiplayer.peer_connected.connect(add_player_to_game)
	multiplayer.peer_disconnected.connect(del_player)


func Join_as_player():
	var client_peer = ENetMultiplayerPeer.new()
	client_peer.create_client(Server_IP, Server_port)
	
	multiplayer.multiplayer_peer = client_peer
	


func add_player_to_game(id: int):
	var player_to_add = player.instantiate()
	player_to_add.player_id = id
	player_to_add.player_name = str(id)
	
	shipspawn_node.add_child(player_to_add, true)

func del_player(id: int):
	pass
	
"

[node name="Lobby" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_2si1u")
